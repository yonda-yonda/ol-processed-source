{"version":3,"file":"36-4454fec64cbd890990ae.js","mappings":"6PAOA,SAASA,EAAaC,GAAW,IAAIC,EACrC,WAAuC,GAAuB,oBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EAAO,GAAID,QAAQC,UAAUC,KAAM,OAAO,EAAO,GAAqB,mBAAVC,MAAsB,OAAO,EAAM,IAAsF,OAAhFC,QAAQC,UAAUC,QAAQC,KAAKP,QAAQC,UAAUG,QAAS,IAAI,WAAa,MAAY,CAAkC,CAA1B,MAAOI,GAAK,OAAO,CAAO,CAAE,CADvQC,GAA6B,OAAO,WAAkC,IAAsCC,EAAlCC,GAAQ,OAAgBb,GAAkB,GAAIC,EAA2B,CAAE,IAAIa,GAAY,OAAgBC,MAAMC,YAAaJ,EAASV,QAAQC,UAAUU,EAAOI,UAAWH,EAAY,MAASF,EAASC,EAAMK,MAAMH,KAAME,WAAc,OAAO,OAA2BF,KAAMH,EAAS,CAAG,CAUxa,IAAIO,EAA+B,SAAUC,IAC3C,OAAUD,EAAiBC,GAC3B,IAeQC,EAfJC,EAASvB,EAAaoB,GAC1B,SAASA,IACP,IAAII,EAGJ,IAFA,OAAgBR,KAAMI,GACtBI,EAAQD,EAAOb,KAAKM,MACa,oBAAtBS,kBACT,MAAM,IAAIC,MAAM,kEACX,GAAwB,oBAAbC,UAAuD,oBAApBC,gBACnD,MAAM,IAAIF,MAAM,uFAElB,OAAOF,CACT,CAyCA,OAxCA,OAAaJ,EAAiB,CAAC,CAC7BS,IAAK,SACLC,OACMR,GAAU,OAAgC,UAAyB,SAASS,EAAQC,EAAeC,GACrG,IAAIC,EAAMC,EAAaC,EAAQC,EAC/B,OAAO,UAAyB,SAAkBC,GAChD,OACE,OAAQA,EAASC,KAAOD,EAASE,MAC/B,KAAK,EAGH,OAFAN,EAAO,IAAIO,KAAK,CAACR,IACjBK,EAASE,KAAO,EACTf,kBAAkBS,GAC3B,KAAK,EAcH,OAbAC,EAAcG,EAASI,KACC,oBAAbf,WACTS,EAAST,SAASgB,cAAc,WACzBC,MAAQT,EAAYS,MAC3BR,EAAOS,OAASV,EAAYU,QAE5BT,EAAS,IAAIR,gBAAgBO,EAAYS,MAAOT,EAAYU,SAE9DR,EAAMD,EAAOU,WAAW,OACpBC,UAAUZ,EAAa,EAAG,GAIvBG,EAASU,OAAO,SAAUX,EAAIY,aAAa,EAAG,EAAGd,EAAYS,MAAOT,EAAYU,QAAQK,KAAKjB,QACtG,KAAK,EACL,IAAK,MACH,OAAOK,EAASa,OAGxB,GAAGpB,EACL,KACA,SAAgBqB,EAAIC,GAClB,OAAO/B,EAAQH,MAAMH,KAAME,UAC7B,MAIGE,CACT,CAvDmC,C,QAuDjC,E","sources":["webpack://ol-processed-source/./node_modules/geotiff/dist-module/compression/webimage.js"],"sourcesContent":["import _asyncToGenerator from \"/Users/k-yoda/work/sandbox/ol-processed-source/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/k-yoda/work/sandbox/ol-processed-source/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/k-yoda/work/sandbox/ol-processed-source/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/k-yoda/work/sandbox/ol-processed-source/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/k-yoda/work/sandbox/ol-processed-source/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/k-yoda/work/sandbox/ol-processed-source/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _regeneratorRuntime from \"/Users/k-yoda/work/sandbox/ol-processed-source/node_modules/@babel/runtime/regenerator/index.js\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport BaseDecoder from './basedecoder.js';\n\n/**\n * class WebImageDecoder\n *\n * This decoder uses the browsers image decoding facilities to read image\n * formats like WebP when supported.\n */\nvar WebImageDecoder = /*#__PURE__*/function (_BaseDecoder) {\n  _inherits(WebImageDecoder, _BaseDecoder);\n  var _super = _createSuper(WebImageDecoder);\n  function WebImageDecoder() {\n    var _this;\n    _classCallCheck(this, WebImageDecoder);\n    _this = _super.call(this);\n    if (typeof createImageBitmap === 'undefined') {\n      throw new Error('Cannot decode WebImage as `createImageBitmap` is not available');\n    } else if (typeof document === 'undefined' && typeof OffscreenCanvas === 'undefined') {\n      throw new Error('Cannot decode WebImage as neither `document` nor `OffscreenCanvas` is not available');\n    }\n    return _this;\n  }\n  _createClass(WebImageDecoder, [{\n    key: \"decode\",\n    value: function () {\n      var _decode = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(fileDirectory, buffer) {\n        var blob, imageBitmap, canvas, ctx;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                blob = new Blob([buffer]);\n                _context.next = 3;\n                return createImageBitmap(blob);\n              case 3:\n                imageBitmap = _context.sent;\n                if (typeof document !== 'undefined') {\n                  canvas = document.createElement('canvas');\n                  canvas.width = imageBitmap.width;\n                  canvas.height = imageBitmap.height;\n                } else {\n                  canvas = new OffscreenCanvas(imageBitmap.width, imageBitmap.height);\n                }\n                ctx = canvas.getContext('2d');\n                ctx.drawImage(imageBitmap, 0, 0);\n\n                // TODO: check how many samples per pixel we have, and return RGB/RGBA accordingly\n                // it seems like GDAL always encodes via RGBA which does not require a translation\n                return _context.abrupt(\"return\", ctx.getImageData(0, 0, imageBitmap.width, imageBitmap.height).data.buffer);\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      function decode(_x, _x2) {\n        return _decode.apply(this, arguments);\n      }\n      return decode;\n    }()\n  }]);\n  return WebImageDecoder;\n}(BaseDecoder);\nexport { WebImageDecoder as default };"],"names":["_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","e","_isNativeReflectConstruct","result","Super","NewTarget","this","constructor","arguments","apply","WebImageDecoder","_BaseDecoder","_decode","_super","_this","createImageBitmap","Error","document","OffscreenCanvas","key","value","_callee","fileDirectory","buffer","blob","imageBitmap","canvas","ctx","_context","prev","next","Blob","sent","createElement","width","height","getContext","drawImage","abrupt","getImageData","data","stop","_x","_x2"],"sourceRoot":""}