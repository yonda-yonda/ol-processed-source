"use strict";(self.webpackChunkol_processed_source=self.webpackChunkol_processed_source||[]).push([[794],{6620:function(e,t,r){var n=r(721);t.Z=n.Z},4247:function(e,t,r){r.r(t),r.d(t,{default:function(){return He}});var n=r(5861),a=r(4687),o=r.n(a),l=r(7294),i=r(2055),c=r(8177),s=r(2265),d=r(3854),u=r(7119),m=r(2826),p=r(2751),f=r(6147),v=r(2457),h=r(2355),g=r(8551),b=r(7780),Z=r(9439),x=r(7462),E=r(3366),w=r(5505),y=r(9236),S=r(8379),k=r(6981),C=r(1351),R=r(9508);function P(e){return(0,C.Z)("MuiFormGroup",e)}(0,R.Z)("MuiFormGroup",["root","row","error"]);var j=r(6698),z=r(5395),M=r(5893),F=["className","row"],L=(0,S.ZP)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,r.row&&t.row]}})((function(e){var t=e.ownerState;return(0,x.Z)({display:"flex",flexDirection:"column",flexWrap:"wrap"},t.row&&{flexDirection:"row"})})),I=l.forwardRef((function(e,t){var r=(0,k.Z)({props:e,name:"MuiFormGroup"}),n=r.className,a=r.row,o=void 0!==a&&a,l=(0,E.Z)(r,F),i=(0,j.Z)(),c=(0,z.Z)({props:r,muiFormControl:i,states:["error"]}),s=(0,x.Z)({},r,{row:o,error:c.error}),d=function(e){var t=e.classes,r={root:["root",e.row&&"row",e.error&&"error"]};return(0,y.Z)(r,P,t)}(s);return(0,M.jsx)(L,(0,x.Z)({className:(0,w.Z)(d.root,n),ownerState:s,ref:t},l))})),_=r(8636),O=r(3979);var N=l.createContext(void 0),q=r(1598),U=["actions","children","defaultValue","name","onChange","value"],G=l.forwardRef((function(e,t){var r=e.actions,n=e.children,a=e.defaultValue,o=e.name,i=e.onChange,c=e.value,s=(0,E.Z)(e,U),d=l.useRef(null),u=(0,O.Z)({controlled:c,default:a,name:"RadioGroup"}),m=(0,Z.Z)(u,2),p=m[0],f=m[1];l.useImperativeHandle(r,(function(){return{focus:function(){var e=d.current.querySelector("input:not(:disabled):checked");e||(e=d.current.querySelector("input:not(:disabled)")),e&&e.focus()}}}),[]);var v=(0,_.Z)(t,d),h=(0,q.Z)(o);return(0,M.jsx)(N.Provider,{value:{name:h,onChange:function(e){f(e.target.value),i&&i(e,e.target.value)},value:p},children:(0,M.jsx)(I,(0,x.Z)({role:"radiogroup",ref:v},s,{children:n}))})})),D=r(4942),B=r(7869);function W(e){return(0,C.Z)("MuiFormControlLabel",e)}var T=(0,R.Z)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error"]),V=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","value"],H=(0,S.ZP)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[(0,D.Z)({},"& .".concat(T.label),t.label),t.root,t["labelPlacement".concat((0,B.Z)(r.labelPlacement))]]}})((function(e){var t=e.theme,r=e.ownerState;return(0,x.Z)((0,D.Z)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16},"&.".concat(T.disabled),{cursor:"default"}),"start"===r.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===r.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===r.labelPlacement&&{flexDirection:"column",marginLeft:16},(0,D.Z)({},"& .".concat(T.label),(0,D.Z)({},"&.".concat(T.disabled),{color:(t.vars||t).palette.text.disabled})))})),Q=l.forwardRef((function(e,t){var r=(0,k.Z)({props:e,name:"MuiFormControlLabel"}),n=r.className,a=r.componentsProps,o=void 0===a?{}:a,i=r.control,c=r.disabled,s=r.disableTypography,u=r.label,m=r.labelPlacement,p=void 0===m?"end":m,f=(0,E.Z)(r,V),v=(0,j.Z)(),h=c;void 0===h&&void 0!==i.props.disabled&&(h=i.props.disabled),void 0===h&&v&&(h=v.disabled);var g={disabled:h};["checked","name","onChange","value","inputRef"].forEach((function(e){void 0===i.props[e]&&void 0!==r[e]&&(g[e]=r[e])}));var b=(0,z.Z)({props:r,muiFormControl:v,states:["error"]}),Z=(0,x.Z)({},r,{disabled:h,labelPlacement:p,error:b.error}),S=function(e){var t=e.classes,r=e.disabled,n=e.labelPlacement,a=e.error,o={root:["root",r&&"disabled","labelPlacement".concat((0,B.Z)(n)),a&&"error"],label:["label",r&&"disabled"]};return(0,y.Z)(o,W,t)}(Z),C=u;return null==C||C.type===d.Z||s||(C=(0,M.jsx)(d.Z,(0,x.Z)({component:"span",className:S.label},o.typography,{children:C}))),(0,M.jsxs)(H,(0,x.Z)({className:(0,w.Z)(S.root,n),ownerState:Z,ref:t},f,{children:[l.cloneElement(i,g),C]}))})),$=Q,A=r(7663),X=r(8082);function Y(e){return(0,C.Z)("PrivateSwitchBase",e)}(0,R.Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var J=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],K=(0,S.ZP)(X.Z)((function(e){var t=e.ownerState;return(0,x.Z)({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})})),ee=(0,S.ZP)("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),te=l.forwardRef((function(e,t){var r=e.autoFocus,n=e.checked,a=e.checkedIcon,o=e.className,l=e.defaultChecked,i=e.disabled,c=e.disableFocusRipple,s=void 0!==c&&c,d=e.edge,u=void 0!==d&&d,m=e.icon,p=e.id,f=e.inputProps,v=e.inputRef,h=e.name,g=e.onBlur,b=e.onChange,S=e.onFocus,k=e.readOnly,C=e.required,R=e.tabIndex,P=e.type,z=e.value,F=(0,E.Z)(e,J),L=(0,O.Z)({controlled:n,default:Boolean(l),name:"SwitchBase",state:"checked"}),I=(0,Z.Z)(L,2),_=I[0],N=I[1],q=(0,j.Z)(),U=i;q&&void 0===U&&(U=q.disabled);var G="checkbox"===P||"radio"===P,D=(0,x.Z)({},e,{checked:_,disabled:U,disableFocusRipple:s,edge:u}),W=function(e){var t=e.classes,r=e.checked,n=e.disabled,a=e.edge,o={root:["root",r&&"checked",n&&"disabled",a&&"edge".concat((0,B.Z)(a))],input:["input"]};return(0,y.Z)(o,Y,t)}(D);return(0,M.jsxs)(K,(0,x.Z)({component:"span",className:(0,w.Z)(W.root,o),centerRipple:!0,focusRipple:!s,disabled:U,tabIndex:null,role:void 0,onFocus:function(e){S&&S(e),q&&q.onFocus&&q.onFocus(e)},onBlur:function(e){g&&g(e),q&&q.onBlur&&q.onBlur(e)},ownerState:D,ref:t},F,{children:[(0,M.jsx)(ee,(0,x.Z)({autoFocus:r,checked:n,defaultChecked:l,className:W.input,disabled:U,id:G&&p,name:h,onChange:function(e){if(!e.nativeEvent.defaultPrevented){var t=e.target.checked;N(t),b&&b(e,t)}},readOnly:k,ref:v,required:C,ownerState:D,tabIndex:R,type:P},"checkbox"===P&&void 0===z?{}:{value:z},f)),_?a:m]}))})),re=r(4388),ne=(0,re.Z)((0,M.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),ae=(0,re.Z)((0,M.jsx)("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),oe=(0,S.ZP)("span")({position:"relative",display:"flex"}),le=(0,S.ZP)(ne)({transform:"scale(1)"}),ie=(0,S.ZP)(ae)((function(e){var t=e.theme,r=e.ownerState;return(0,x.Z)({left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest})},r.checked&&{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})})}));var ce=function(e){var t=e.checked,r=void 0!==t&&t,n=e.classes,a=void 0===n?{}:n,o=e.fontSize,l=(0,x.Z)({},e,{checked:r});return(0,M.jsxs)(oe,{className:a.root,ownerState:l,children:[(0,M.jsx)(le,{fontSize:o,className:a.background,ownerState:l}),(0,M.jsx)(ie,{fontSize:o,className:a.dot,ownerState:l})]})},se=r(6620);function de(e){return(0,C.Z)("MuiRadio",e)}var ue=(0,R.Z)("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary"]),me=["checked","checkedIcon","color","icon","name","onChange","size","className"],pe=(0,S.ZP)(te,{shouldForwardProp:function(e){return(0,S.FO)(e)||"classes"===e},name:"MuiRadio",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,t["color".concat((0,B.Z)(r.color))]]}})((function(e){var t=e.theme,r=e.ownerState;return(0,x.Z)({color:(t.vars||t).palette.text.secondary,"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===r.color?t.vars.palette.action.activeChannel:t.vars.palette[r.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,A.Fq)("default"===r.color?t.palette.action.active:t.palette[r.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==r.color&&(0,D.Z)({},"&.".concat(ue.checked),{color:(t.vars||t).palette[r.color].main}),(0,D.Z)({},"&.".concat(ue.disabled),{color:(t.vars||t).palette.action.disabled}))}));var fe=(0,M.jsx)(ce,{checked:!0}),ve=(0,M.jsx)(ce,{}),he=l.forwardRef((function(e,t){var r,n,a,o,i=(0,k.Z)({props:e,name:"MuiRadio"}),c=i.checked,s=i.checkedIcon,d=void 0===s?fe:s,u=i.color,m=void 0===u?"primary":u,p=i.icon,f=void 0===p?ve:p,v=i.name,h=i.onChange,g=i.size,b=void 0===g?"medium":g,Z=i.className,S=(0,E.Z)(i,me),C=(0,x.Z)({},i,{color:m,size:b}),R=function(e){var t=e.classes,r=e.color,n={root:["root","color".concat((0,B.Z)(r))]};return(0,x.Z)({},t,(0,y.Z)(n,de,t))}(C),P=l.useContext(N),j=c,z=(0,se.Z)(h,P&&P.onChange),F=v;return P&&(void 0===j&&(a=P.value,j="object"==typeof(o=i.value)&&null!==o?a===o:String(a)===String(o)),void 0===F&&(F=P.name)),(0,M.jsx)(pe,(0,x.Z)({type:"radio",icon:l.cloneElement(f,{fontSize:null!=(r=ve.props.fontSize)?r:b}),checkedIcon:l.cloneElement(d,{fontSize:null!=(n=fe.props.fontSize)?n:b}),ownerState:C,classes:R,name:F,checked:j,onChange:z,ref:t,className:(0,w.Z)(R.root,Z)},S))})),ge=r(1939),be=r(5115),Ze=r(8128),xe=(r(5846),r(9091)),Ee=r(3066),we=r(3276),ye=r(2462),Se=r(7621),ke=r(3681),Ce=r(5760),Re=r(9044),Pe=r(8935),je=r(4578),ze=r(8971),Me=r(7053),Fe=r(7059),Le=r(3706),Ie=r(3355),_e=function(e){function t(t){var r,n=Object.assign({maxPixel:Le.ui,maxWidth:Le.qx,maxHeight:Le.sn,tileSize:ze.S,wrapX:!0,crossOrigin:""},t);if(!n.url&&!n.file)throw new Error("source url or file is necessary.");var a=n.tileSize;if(a<256)throw new Error("tileSize is too small.");var o=n.maxPixel;if(o>Le.ui)throw new Error("maxPixel is too large.");var l=n.maxHeight;if(l>Le.sn)throw new Error("maxHeight is too large.");var i=n.maxWidth;if(i>Le.qx)throw new Error("maxWidth is too large.");var c=n.wrapX,s=(0,ke.U2)(n.projection);if(!s&&"string"==typeof n.projection)try{var d=Pe.utils.getCrs(n.projection);Ce.default.defs(n.projection,d),(0,Re.z)(Ce.default),s=(0,ke.U2)(n.projection)}catch(y){}if(!s)throw new Error("Unsupported projection.");var u=[1/0,1/0,-1/0,-1/0];Array.isArray(n.imageExtent)&&n.imageExtent.length>3&&(u=n.imageExtent);var m=[u[2]-u[0],u[3]-u[1]],p=m[0]/m[1],f=u,v=f[2]-f[0],h=f[3]-f[1],g=0;n.rotate&&(g=n.rotate,u=(0,Ie.pe)(u,g));r=e.call(this,Object.assign({},n,{state:"loading",projection:s,tileLoadFunction:function(e,t){var n=t.split(",").map(Number),o=n[0],l=n[1],i=n[2],c=document.createElement("canvas"),s=c.getContext("2d",{storage:"discardable"}),d=document.createElement("canvas"),m=d.getContext("2d",{storage:"discardable"});if(r.context_&&s&&m){c.width=a,c.height=a;var p=(0,Ie.Jj)(r.isGlobalGrid_?f:u,o,l,i),v=p[0],h=p[2],g=p[1],b=p[3],Z=u,x=Z[0],E=Z[1],w=Z[2],y=Z[3];if(r.isGlobalGrid_){var S=f[2]-f[0];x<f[0]&&h>0?(v-=S,h-=S):f[2]<w&&v<0&&(v+=S,h+=S),(0,Ie.t1)([x,E,w,y],[v,b,h,g])||e.setState(Fe.Z.EMPTY)}var k=[(w-x)/r.context_.canvas.width,(y-E)/r.context_.canvas.height],C=[(h-v)/a,(g-b)/a],R=[Math.max(v,x),Math.max(E,b)],P=[Math.min(h,w),Math.min(y,g)],j=[Math.round((R[0]-v)/C[0]),Math.round((g-P[1])/C[1]),Math.round((P[0]-v)/C[0]),Math.round((g-R[1])/C[1])],z=[Math.round((R[0]-x)/k[0]),Math.round((y-P[1])/k[1]),Math.round((P[0]-x)/k[0]),Math.round((y-R[1])/k[1])],M=[z[2]-z[0],z[3]-z[1]],F=[j[2]-j[0],j[3]-j[1]];if(Math.min(...M,...F)<=0)e.setState(Fe.Z.EMPTY);else{d.width=M[0],d.height=M[1],m.clearRect(0,0,M[0],M[1]),m.putImageData(r.context_.getImageData(z[0],z[1],M[0],M[1]),0,0),s.drawImage(d,0,0,M[0],M[1],j[0],j[1],F[0],F[1]);var L=c.toDataURL();e.getImage().src=L,(0,Ie.ZH)(d,m),(0,Ie.ZH)(c,s)}}else e.setState(Fe.Z.ERROR)},url:"{z},{x},{y}"}))||this,r.imageExtent_=u,r.isGlobalGrid_=!1;var b=s.getCode();if(r.code_=b,c){var Z=(0,Ie.DF)(b)?Le.hW[4326]:(0,Ie.Vf)(b)?Le.hW[3857]:null;if(Z){if(v=(f=Z)[2]-f[0],h=f[3]-f[1],u[0]<f[0]-v/2||f[2]+v/2<u[0]||u[1]<f[1]||f[3]<u[1]||u[2]<f[0]-v/2||f[2]+v/2<u[2]||u[3]<f[1]||f[3]<u[3]||u[2]<=u[0]||u[0]-u[2]>v)throw new Error("Invalid extent.");r.isGlobalGrid_=!0}}var x=document.createElement("canvas").getContext("2d",{storage:"discardable"});if(!x)throw r.context_=null,new Error("Can't get canvas context.");r.context_=x;var E=new Image;E.crossOrigin=n.crossOrigin;var w="";return n.file?w=URL.createObjectURL(n.file):n.url&&(w=n.url),E.addEventListener("load",(function(){if(n.file&&URL.revokeObjectURL(w),r.context_){var e=E.width,t=E.height;e<t?t=e/p:e=t*p;var c=(0,Ie.pe)([0,0,e,t],g),s=c[2]-c[0],d=c[3]-c[1],u=(0,Ie.vh)([s,d],[e,t],o,i,l,a),m=u[0];s=m[0],d=m[1];var b=u[1];e=b[0],t=b[1];var Z=Math.max(v,h)/a,x=new Me.Z({extent:f,tileSize:a,minZoom:n.minZoom,resolutions:(0,Ie.$6)(f,{maxZoom:n.maxZoom,tileSize:a,maxResolution:Z})});if(!x)return void r.setState("error");r.tileGrid=x,r.context_.canvas.width=s,r.context_.canvas.height=d,r.context_.save(),r.context_.translate(s/2,d/2),r.context_.rotate(-g),r.context_.drawImage(E,0,0,E.width,E.height,-e/2,-t/2,e,t),r.context_.restore(),r.setState("ready")}})),E.addEventListener("error",(function(){n.file&&URL.revokeObjectURL(w),r.setState("error")})),E.src=w,r}(0,je.Z)(t,e);var r=t.prototype;return r.getBoundingBox=function(e){var t,r=this.imageExtent_,n=this.code_;if(!r||!n)return null;if(!e)return r;var a=(0,ke.U2)(e);if(!a)try{var o=Pe.utils.getCrs(e);Ce.default.defs(e,o),(0,Re.z)(Ce.default),a=(0,ke.U2)(e)}catch(s){throw new Error("Unsupported projection.")}var l=null===(t=a)||void 0===t?void 0:t.getCode();if(!l)return null;if(!e||n===l)return r;var i=[...(0,ke.vs)([r[0],r[1]],n,l),...(0,ke.vs)([r[2],r[3]],n,l)],c=(0,Ie.DF)(l)?Le.hW[4326]:(0,Ie.Vf)(l)?Le.hW[3857]:null;return i[0]>i[2]&&c&&(i[2]+=c[2]-c[0]),i},r.release=function(){this.context_&&((0,Ie.ZH)(this.context_.canvas,this.context_),this.context_=null,this.setState("undefined"))},t}(r(7634).E),Oe=(0,ge.Z)("div")({fontSize:"12px",marginTop:"10px",marginLeft:"2px"}),Ne=(0,ge.Z)("div")({display:"flex",marginTop:"10px",alignItems:"center","& > *":{flex:"0 0 auto",marginRight:"5px"}}),qe=(0,ge.Z)("div")({fontSize:"12px"}),Ue=(0,ge.Z)("div")({overflow:"hidden"}),Ge=(0,ge.Z)(d.Z)({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}),De=(0,ge.Z)(Ue)({flex:"1 1 auto"}),Be=(0,ge.Z)("div")({flex:"0 0 auto"}),We=(0,ge.Z)("ul")({listStyle:"none",margin:0,padding:0,"& > li":{marginTop:"5px","&:firstChild":{marginTop:0}}}),Te={code:"EPSG:4326",type:"file",files:"",url:"",extent:"",rotate:"0",maxPixel:"10000000"};function Ve(e){var t=Object.assign({},e),r=t.center,n=void 0===r?(0,ke.mi)([0,0]):r,a=t.zoom,o=void 0===a?1:a,i=t.projection,c=l.useRef(!1),s=l.useRef(null),d=l.useState(),u=d[0],m=d[1];return l.useEffect((function(){if(!c.current&&s.current){var e=[new Ee.Z({collapsible:!1})],t=new be.Z({target:s.current,layers:[new ye.Z({source:new Se.Z})],view:new Ze.ZP({center:n,zoom:o,projection:i}),interactions:(0,xe.ce)({altShiftDragRotate:!1,pinchRotate:!1}),controls:(0,we.ce)({attribution:!1,zoom:!1,rotate:!1}).extend(e)});m(t),c.current=!0}}),[n,o,i]),{ref:s,map:u}}var He=function(){var e,t,r=Ve(),a=l.useState([]),Z=a[0],x=a[1],E=l.useState(null),w=E[0],y=E[1],S=l.useState(!1),k=S[0],C=S[1],R=l.useState(!1),P=R[0],j=R[1],z=l.useState({code:"EPSG:3857",error:!1}),M=z[0],F=z[1],L=l.useRef(),I=l.useCallback((function(e){if(!(0,ke.U2)(e)){try{var t=Pe.utils.getCrs(e);Ce.default.defs(e,t)}catch(c){return void F((function(e){return{code:e.code,error:!0}}))}(0,Re.z)(Ce.default)}if(r.map){var n=r.map.getView(),a=n.getProjection(),o=null==a?void 0:a.getCode();if(e!==o){var l=(0,ke.U2)(e);if(l){var i=n.getCenter();r.map.setView(new Ze.ZP({center:(0,ke.vs)(null!=i?i:[0,0],o,e),zoom:n.getZoom()||0,projection:l}))}}F({code:e,error:!1})}}),[r.map]),_=(0,c.cI)({mode:"onSubmit",criteriaMode:"all",defaultValues:Te}),O=_.control,N=_.handleSubmit,q=_.register,U=_.reset,D=_.watch,B=_.formState.errors,W=l.useCallback((function(e){x((function(t){var n=[...t],a=n.findIndex((function(t){return e===t.id})),o=n[a];return o&&r.map?(r.map.removeLayer(o.layer),n.splice(a,1),n):n}))}),[r.map]),T=l.useCallback(function(){var e=(0,n.Z)(o().mark((function e(t,n,a){var l,i,c,s,d,u,m,p,f,v,h,g,b,Z;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C(!0),l=a.code,i=a.rotate.length>0?parseFloat(a.rotate):0,c=a.maxPixel.length>0?parseFloat(a.maxPixel):1,(0,ke.U2)(l)){e.next=15;break}e.prev=5,s=Pe.utils.getCrs(l),Ce.default.defs(l,s),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),y("UnsupportedCrs"),e.abrupt("return");case 14:(0,Re.z)(Ce.default);case 15:d=a.extent.split(",").map((function(e){return Number(e)})),u="",e.t1=a.type,e.next="file"===e.t1?20:"url"===e.t1?25:28;break;case 20:if(a.files instanceof FileList){e.next=22;break}return e.abrupt("break",28);case 22:return m=a.files[0],u=m.name,e.abrupt("break",28);case 25:return p=a.url,u=p,e.abrupt("break",28);case 28:f=null;try{f=new _e({projection:l,file:m,url:p,imageExtent:d,rotate:i/180*Math.PI,maxPixel:c,crossOrigin:"anonymous",wrapX:!0})}catch(o){y("InvalidProps"),C(!1)}f&&(v=f,h=f.getState(),g=function(){if(r.map){var e=r.map.getView().getProjection().getCode(),t=v.getBoundingBox(e);t&&r.map.getView().fit(t,{padding:[40,20,40,20],maxZoom:20})}},b=function(){var e=v.getState();if("ready"===e){var r=new ye.Z({source:v});t.addLayer(r),x((function(e){return[...e,{id:n,layer:r,name:u,code:l,extent:d,rotate:i,maxPixel:c,error:null}]})),g(),U()}"error"===e&&y("FailedLoadSource"),C(!1)},"ready"===h?b():(Z=function e(){"loading"!==v.getState()&&(v.removeEventListener("change",e),b())},f.addEventListener("change",Z)));case 31:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t,r,n){return e.apply(this,arguments)}}(),[r.map,U]),V=l.useCallback((function(e){var t=e.source,n=e.id;r.map&&T(r.map,n,t)}),[r.map,T]),H=l.useCallback((function(e){for(var t=e.extent.split(",").map((function(e){return Number(e)})),r=0;r<t.length;r++){var n=t[r];if("number"!=typeof n||n-n!=0)return void y("InvalidExtent")}if(t[0]>t[2]||t[1]>t[3])y("ReversedExtent");else{var a="";switch(e.type){case"file":if(!(e.files instanceof FileList))break;var o=e.files[0];a+=o.name;break;case"url":var l=e.url;a+=l}a+=t.join(",");var i=e.rotate.length>0?e.rotate:0;if((a+=","+i).length>0){if(Z.findIndex((function(e){return a===e.id}))>=0)return void y("Duplicate");V({id:a,source:e})}}}),[V,Z]),Q=D();return l.createElement(l.Fragment,null,l.createElement(s.ZP,null),l.createElement(i.Helmet,null,l.createElement("title",null,"ol-processed-source / Display Image"),l.createElement("meta",{name:"description",content:"Display image on map."}),l.createElement("link",{rel:"canonical",href:"https://yonda-yonda.github.io/ol-processed-source/image"}),l.createElement("link",{rel:"icon",type:"image/x-icon",href:"https://github.githubassets.com/favicon.ico"}),l.createElement("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"})),l.createElement(u.Z,null,l.createElement(d.Z,{variant:"h2",component:"h1"},"ol-processed-source ",l.createElement("br",null)," Display Image"),l.createElement(m.Z,{my:4,spacing:4},l.createElement("div",null,l.createElement(p.ZP,{container:!0,spacing:2},l.createElement(p.ZP,{item:!0,xs:9},l.createElement("div",{style:{position:"relative"}},l.createElement("div",{ref:r.ref,style:{width:"100%",height:"340px"}}),P?l.createElement("div",null,l.createElement(Ne,null,l.createElement("div",null,l.createElement(v.Z,{inputRef:L,label:"MapCode",placeholder:"EPSG:4326",size:"small"})),l.createElement("div",null,l.createElement(f.Z,{variant:"contained",type:"button",onClick:function(){var e;I((null===(e=L.current)||void 0===e?void 0:e.value)||"")}},"Change")),l.createElement("div",null,l.createElement(f.Z,{variant:"outlined",type:"button",onClick:function(){j(!1),F((function(e){return{code:e.code,error:!1}}))}},"cancel"))),M.error&&l.createElement(h.Z,null,"Unsupported Code.")):l.createElement("div",null,l.createElement(Oe,null,"view at ",M.code),l.createElement(f.Z,{size:"small",variant:"outlined",type:"button",onClick:function(){j(!0)}},"Reprojection")))),l.createElement(p.ZP,{item:!0,xs:3},Z.length>0?l.createElement(We,null,Z.map((function(e,t){return l.createElement("li",{key:String(t)},l.createElement(m.Z,{direction:"row",spacing:1,justifyContent:"space-between",alignItems:"center"},l.createElement(De,null,l.createElement(g.Z,{title:l.createElement("div",null,l.createElement(d.Z,{variant:"caption",display:"block"},"Name: ",e.name),l.createElement(d.Z,{variant:"caption",display:"block"},"Code: ",e.code),l.createElement(d.Z,{variant:"caption",display:"block"},"Extent: [",e.extent.join(","),"]"),l.createElement(d.Z,{variant:"caption",display:"block"},"Rotete: ",e.rotate,"deg"),l.createElement(d.Z,{variant:"caption",display:"block"},"MaxPixelSize: ",e.maxPixel,"px")),arrow:!0,placement:"left"},l.createElement(Ge,{variant:"body2"},e.name))),l.createElement(Be,null,l.createElement(f.Z,{size:"small",variant:"outlined",onClick:function(){W(e.id)}},"REMOVE"))))}))):l.createElement(d.Z,null,"Nothing to display.")))),l.createElement("hr",null),l.createElement("div",null,l.createElement("form",{onSubmit:N(H)},l.createElement(m.Z,{spacing:2},l.createElement(c.Qr,{control:O,name:"type",render:function(e){var t=e.field;return l.createElement(b.Z,{fullWidth:!0},l.createElement(G,Object.assign({row:!0},t),l.createElement($,{value:"file",control:l.createElement(he,{size:"small"}),label:"Local File"}),l.createElement($,{value:"url",control:l.createElement(he,{size:"small"}),label:"URL"})))}}),"file"===Q.type&&l.createElement(b.Z,{component:"fieldset",error:!(null==B||!B.files),fullWidth:!0},l.createElement("input",Object.assign({},q("files",{required:!0,validate:{length:function(e){return e instanceof FileList&&1===e.length}}}),{disabled:k,accept:".webp,.png,.jpeg,.jpg,.gif,image/webp,image/png,image/jpeg,image/svg+xml,image/gif",type:"file"})),"required"===(null==B||null===(e=B.files)||void 0===e?void 0:e.type)&&l.createElement(h.Z,null,"Required."),"length"===(null==B||null===(t=B.files)||void 0===t?void 0:t.type)&&l.createElement(h.Z,null,"Please select one file.")),"url"===Q.type&&l.createElement(c.Qr,{control:O,name:"url",render:function(e){var t=e.field,r=e.fieldState.error;return l.createElement(b.Z,{component:"fieldset",error:!!B,fullWidth:!0},l.createElement(v.Z,Object.assign({},t,{label:"url",size:"small",error:!!r,disabled:k,placeholder:"https://"})),"required"===(null==r?void 0:r.type)&&l.createElement(h.Z,null,"Required."),"pattern"===(null==r?void 0:r.type)&&l.createElement(h.Z,null,"Not matched URL pattern."))},rules:{required:!0,pattern:/(^(https?):\/\/[^ "]+$|(^http:\/\/localhost))/}}),l.createElement(qe,null,"support: .webp, .png, .jpeg, .jpg, .gif"),l.createElement(m.Z,{direction:"row",spacing:4,sx:{mt:2,mb:1}},l.createElement(c.Qr,{control:O,name:"code",render:function(e){var t=e.field,r=e.fieldState.error;return l.createElement(b.Z,{component:"fieldset",error:!!r,fullWidth:!0},l.createElement(v.Z,Object.assign({},t,{label:"SourceCode",size:"small",error:!!r,disabled:k,placeholder:"EPSG:4326"})),"required"===(null==r?void 0:r.type)&&l.createElement(h.Z,null,"Required."))},rules:{required:!0}}),l.createElement(c.Qr,{control:O,name:"extent",render:function(e){var t=e.field,r=e.fieldState.error;return l.createElement(b.Z,{component:"fieldset",error:!!r,fullWidth:!0},l.createElement(v.Z,Object.assign({},t,{label:"Extent",size:"small",error:!!r,disabled:k,placeholder:"left, bottom, right, top"})),"required"===(null==r?void 0:r.type)&&l.createElement(h.Z,null,"Required."),"pattern"===(null==r?void 0:r.type)&&l.createElement(h.Z,null,"Must be left bottom and right top coordinates separated by commas."))},rules:{required:!0,pattern:/^(\+|-|\.|\d|e|E|,|\s)*$/}})),l.createElement(m.Z,{direction:"row",spacing:4,sx:{mb:1}},l.createElement(c.Qr,{control:O,name:"rotate",render:function(e){var t=e.field,r=e.fieldState.error;return l.createElement(b.Z,{component:"fieldset",error:!!r,fullWidth:!0},l.createElement(v.Z,Object.assign({},t,{label:"Rotate(degree)",size:"small",error:!!r,disabled:k})),"pattern"===(null==r?void 0:r.type)&&l.createElement(h.Z,null,"Must be a number."))},rules:{pattern:/^((\+|-){0,1}[1-9]\d*|0)(\.\d+)?$/}}),l.createElement(c.Qr,{control:O,name:"maxPixel",render:function(e){var t=e.field,r=e.fieldState.error;return l.createElement(b.Z,{component:"fieldset",error:!!r,fullWidth:!0},l.createElement(v.Z,Object.assign({},t,{label:"MaxPixelSize",size:"small",error:!!r,disabled:k})),"required"===(null==r?void 0:r.type)&&l.createElement(h.Z,null,"Required."),"pattern"===(null==r?void 0:r.type)&&l.createElement(h.Z,null,"must be a number."),"max"===(null==r?void 0:r.type)&&l.createElement(h.Z,null,"must be less than ",Le.ui,"."))},rules:{required:!0,pattern:/^([1-9][0-9]*|0)$/,max:Le.ui}}))),l.createElement(b.Z,{error:!!w,sx:{mt:3}},l.createElement("div",null,l.createElement(f.Z,{variant:"contained",type:"submit",disabled:k,onClick:function(){y(null)}},"Add Layer")),"Duplicate"===w&&l.createElement(h.Z,{sx:{ml:0}},"Duplicate Layer."),"InvalidExtent"===w&&l.createElement(h.Z,{sx:{ml:0}},"Extent includes Non-numbers."),"ReversedExtent"===w&&l.createElement(h.Z,{sx:{ml:0}},"Some values of Extent are reversed."),"InvalidProps"===w&&l.createElement(h.Z,{sx:{ml:0}},"Some values are invalid."),"FailedLoadSource"===w&&l.createElement(h.Z,{sx:{ml:0}},"Failed to load source."),"UnsupportedCrs"===w&&l.createElement(h.Z,{sx:{ml:0}},"Unsupported CRS."),k&&l.createElement(h.Z,{sx:{mt:1}},"loading.")))))))}}}]);
//# sourceMappingURL=component---src-pages-image-index-tsx-4000b81f46d187ad4f0f.js.map